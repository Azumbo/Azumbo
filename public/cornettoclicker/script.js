const translations = {
  en: {
    "nav.game": "ABOUT GAME",
    "nav.biz": "FOR BUSINESS",
    "nav.download": "DOWNLOAD",
    "hero.subtitle": "LEGENDARY CLICKER IS BACK!",
    "hero.play": "PLAY NOW",
    "features.title": "GAME FEATURES",
    "features.f1": "50+ ice creams",
    "features.f2": "Retro achievements",
    "features.f3": "Cross-platform",
    "biz.title": "WANT THIS GAME FOR YOUR BUSINESS?",
    "biz.bakery": "BAKERY \u2192 CROISSANTS",
    "biz.winery": "WINERY \u2192 GRAPES",
    "biz.brewery": "BREWERY \u2192 BOTTLES",
    "biz.cafe": "CAFE \u2192 COOKIES",
    "biz.offer_title": "YOUR BRANDED GAME IN 7 DAYS:",
    "biz.offer1": "Logo & brand colors",
    "biz.offer2": "Custom collectibles",
    "biz.offer3": "Web + iOS + Android",
    "biz.offer4": "Retro sounds",
    "biz.cta_text": "Want more loyal customers? Let them play!",
    "biz.cta_btn": "ORDER NOW"
  },
  ru: {
    "nav.game": "\u041E \u0418\u0413\u0420\u0415",
    "nav.biz": "\u0414\u041B\u042F \u0411\u0418\u0417\u041D\u0415\u0421\u0410",
    "nav.download": "\u0421\u041A\u0410\u0427\u0410\u0422\u042C",
    "hero.subtitle": "\u041B\u0415\u0413\u0415\u041D\u0414\u0410\u0420\u041D\u042B\u0419 \u041A\u041B\u0418\u041A\u0415\u0420 \u0412\u0415\u0420\u041D\u0423\u041B\u0421\u042F!",
    "hero.play": "\u0418\u0413\u0420\u0410\u0422\u042C",
    "features.title": "\u041E\u0421\u041E\u0411\u0415\u041D\u041D\u041E\u0421\u0422\u0418 \u0418\u0413\u0420\u042B",
    "features.f1": "50+ \u043C\u043E\u0440\u043E\u0436\u0435\u043D\u044B\u0445",
    "features.f2": "\u0420\u0435\u0442\u0440\u043E \u0434\u043E\u0441\u0442\u0438\u0436\u0435\u043D\u0438\u044F",
    "features.f3": "\u041A\u0440\u043E\u0441\u0441-\u043F\u043B\u0430\u0442\u0444\u043E\u0440\u043C\u0435\u043D\u043D\u043E",
    "biz.title": "\u0425\u041E\u0422\u0418\u0422\u0415 \u042D\u0422\u0423 \u0418\u0413\u0420\u0423 \u0414\u041B\u042F \u0412\u0410\u0428\u0415\u0413\u041E \u0411\u0418\u0417\u041D\u0415\u0421\u0410?",
    "biz.bakery": "\u041F\u0415\u041A\u0410\u0420\u041D\u042F \u2192 \u041A\u0420\u0423\u0410\u0421\u0421\u0410\u041D\u042B",
    "biz.winery": "\u0412\u0418\u041D\u041E\u0414\u0415\u041B\u042C\u041D\u042F \u2192 \u0412\u0418\u041D\u041E\u0413\u0420\u0410\u0414",
    "biz.brewery": "\u041F\u0418\u0412\u041E\u0412\u0410\u0420\u041D\u042F \u2192 \u0411\u0423\u0422\u042B\u041B\u041A\u0418",
    "biz.cafe": "\u041A\u0410\u0424\u0415 \u2192 \u041F\u0415\u0427\u0415\u041D\u042C\u0415",
    "biz.offer_title": "\u0412\u0410\u0428\u0410 \u0411\u0420\u0415\u041D\u0414\u0418\u0420\u041E\u0412\u0410\u041D\u041D\u0410\u042F \u0418\u0413\u0420\u0410 \u0417\u0410 7 \u0414\u041D\u0415\u0419:",
    "biz.offer1": "\u041B\u043E\u0433\u043E \u0438 \u0446\u0432\u0435\u0442\u0430",
    "biz.offer2": "\u041A\u0430\u0441\u0442\u043E\u043C\u043D\u044B\u0435 \u043D\u0430\u0445\u043E\u0434\u043A\u0438",
    "biz.offer3": "Web + iOS + Android",
    "biz.offer4": "\u0420\u0435\u0442\u0440\u043E \u0437\u0432\u0443\u043A\u0438",
    "biz.cta_text": "\u041D\u0443\u0436\u043D\u043E \u0431\u043E\u043B\u044C\u0448\u0435 \u043B\u043E\u044F\u043B\u044C\u043D\u044B\u0445 \u043A\u043B\u0438\u0435\u043D\u0442\u043E\u0432? \u041F\u0443\u0441\u0442\u044C \u0438\u0433\u0440\u0430\u044E\u0442!",
    "biz.cta_btn": "\u0417\u0410\u041A\u0410\u0417\u0410\u0422\u042C"
  },
  it: {
    "nav.game": "GIOCO",
    "nav.biz": "PER AZIENDE",
    "nav.download": "SCARICA",
    "hero.subtitle": "IL CLICKER LEGGENDARIO \u00C8 TORNATO!",
    "hero.play": "GIOCA ORA",
    "features.title": "FUNZIONALIT\u00C0 DEL GIOCO",
    "features.f1": "Pi\u00F9 di 50 gelati",
    "features.f2": "Obiettivi retr\u00F2",
    "features.f3": "Multipiattaforma",
    "biz.title": "VUOI QUESTO GIOCO PER LA TUA ATTIVIT\u00C0?",
    "biz.bakery": "PANIFICIO \u2192 CROISSANT",
    "biz.winery": "CANTINA \u2192 UVA",
    "biz.brewery": "BIRRERIA \u2192 BOTTIGLIE",
    "biz.cafe": "CAFF\u00C8 \u2192 BISCOTTI",
    "biz.offer_title": "IL TUO GIOCO BRANDIZZATO IN 7 GIORNI:",
    "biz.offer1": "Logo e colori brand",
    "biz.offer2": "Collezionabili personalizzati",
    "biz.offer3": "Web + iOS + Android",
    "biz.offer4": "Suoni retr\u00F2",
    "biz.cta_text": "Vuoi pi\u00F9 clienti fedeli? Fai giocare!",
    "biz.cta_btn": "ORDINA ORA"
  }
};

function setLanguage(lang) {
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.dataset.i18n;
    if (translations[lang] && translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });
  localStorage.setItem('lang', lang);
}

function initLanguage() {
  const saved = localStorage.getItem('lang');
  let lang = saved || navigator.language.slice(0,2);
  if(!translations[lang]) lang = 'en';
  setLanguage(lang);
}

document.querySelectorAll('.lang-switcher button').forEach(btn => {
  btn.addEventListener('click', () => {
    setLanguage(btn.dataset.lang);
  });
});

document.getElementById('year').textContent = new Date().getFullYear();

// Mini game trigger
let clickCount = 0;
document.querySelector('.pixel-logo').addEventListener('click', () => {
  clickCount++;
  if(clickCount >= 5) startMiniGame();
});

function startMiniGame() {
  document.getElementById('minigame').classList.remove('hidden');
}

// Konami code
const konami = ["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"];
let kIndex = 0;
document.addEventListener('keydown', e => {
  if(e.key === konami[kIndex]) {
    kIndex++;
    if(kIndex === konami.length) {
      alert('Bonus unlocked!');
      kIndex = 0;
    }
  } else {
    kIndex = 0;
  }
});

window.addEventListener('load', initLanguage);

const hoverAudio = new Audio('hover.mp3');
document.querySelectorAll('.pixel-btn').forEach(btn => {
  btn.addEventListener('mouseenter', () => hoverAudio.play());
});
